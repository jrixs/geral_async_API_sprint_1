# Movie Library

### 

## Описание

Проектное задание пятого спринта. Командная работа.

Команда:
 - Юрий Сыновец
 - Андрей Николаев
 - Артем Исмагилов

## Задачи
1. Создать структуру файлов и каталогов для выполнения тесов.
2. Cделайть waiter для Elasticsearch и Redis.
3. Добавить контейнеру etl_movies ожидания доступрости postgres и ES, добится того чтобы контейнер запускался с первого раза.
4. Разработать контейнер для выполнения тестов.
    - Контейнер должен взоимодействовать с другими контейнерами в внутреней сети докера.
    - Контейнер должен запускатся песле того как сервисы: api, redis, ES станут отвечать.
    - Написать класс TestSettings в settings.py
5. Добавить эндпоинт search в backend.
6. Напишите функциональные тесты для метода /search:
    - все граничные случаи по валидации данных;
    - вывести только N записей;
    - поиск записи или записей по фразе;
    - поиск с учётом кеша в Redis.
7. Напишите функциональные тесты для метода /film:
    - все граничные случаи по валидации данных;
    - поиск конкретного фильма;
    - вывести все фильмы;
    - поиск с учётом кеша в Redis.
8. Напишите функциональные тесты для метода /person:
    - все граничные случаи по валидации данных;
    - поиск конкретного человека;
    - поиск всех фильмов с участием человека;
    - вывести всех людей;
    - поиск с учётом кеша в Redis.
9. Напишите функциональные тесты для метода /genre:
    - все граничные случаи по валидации данных;
    - поиск конкретного жанра;
    - вывести все жанры;
    - поиск с учётом кеша в Redis.

## Новые сервисы
 - redis
 - FastAPI

## Запуск прилождения

1. Добавление секретов.

    Секреты для подключения к БД:
    ```bash
    cat app/.env
    DEBUG=False
    DB_NAME=movies_database
    DB_USER=app
    DB_PASSWORD=password
    DB_HOST=db
    SECRET_KEY=******
    ```
    Пароль для сборки контейнера БД:
    ```bash
    echo "password" > app/db_pass
    ```

2. Сборка образа.
    ```bash
    sudo docker-compose up -d --build
    ```
